<html>
<head>
    <title>D3.js Graph Editor</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
    <link href="../src/GraphEditor.css" rel="stylesheet">
    <script src="../src/GraphEditor.js" type="text/javascript"></script>
    <style>
        #graphEditor{
            border: 1px solid black;
            width: 100%;
            height: 100%;
        }
    </style>
    <script type="text/javascript">

        demo = function(){
            //inital data
            var nodes = [
                {id: 0, reflexive: false, additinalData:"foo"},
                {id: 1, reflexive: true, additinalData:"bar" },
                {id: 2, reflexive: false, additinalData:"lorem"}
            ];

            var edges = [
                {source: nodes[0], target: nodes[1], left: false, right: true },
                {source: nodes[1], target: nodes[2], left: false, right: true }
            ];

            function onAddNode(node){
                console.log("A node was added!");
                console.log(node);
            }

            function onRemoveNode(node){
                console.log("A node was removed!");
                console.log(node);
            }

            function onAddEdge(edge){
                console.log("An edge was added!");
                console.log(edge);
            }

            function onRemoveEdge(edge){
                console.log("An edge was removes!");
                console.log(edge);
            }

            //testing
            var editor = new GraphEditor("#graphEditor", {
                nodes : nodes,
                edges : edges,
                lastNodeID : 2,
                onAddNode : onAddNode,
                onRemoveNode : onRemoveNode,
                onAddEdge : onAddEdge,
                onRemoveEdge : onRemoveEdge
            });

            //reload data
            var newNodes = [
                {id: 1, test:"test", reflexive: false},
                {id: 1, reflexive: true }
            ];

            var newEdges = [
                {source: newNodes[0], target: newNodes[1], left: false, right: true }
            ];

            //reload test
            setTimeout(function(){
                //editor.reload({nodes: newNodes, edges: newEdges, lastNodeID : 1});
            }, 5000);
        }
    </script>
</head>
<body onload=demo()>
    <h1>D3.js Graph Editor</h1></p>
    <div id="graphEditor"></div>
</body>
</html>